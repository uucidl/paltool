import filesystem {...}
import libc {...}

func main(argc : int, argv: char**) : int {
  for (argi := 1; argi < argc; argi++) {
    paths := find_all_files_recursively((:uint8*)argv[argi]);
    while (paths.error == PathListError_None) {
      list := paths.output;
      for (i:=0; i<list.num_dirpaths; i++) {
        printf("[d]\t[%s]\n", (:char const*)list.dirpaths[i]);
      }
      for (i:=0; i<list.num_filepaths; i++) {
        printf("[f]\t[%s]\n", (:char const*)list.filepaths[i]);
      }
      next_paths(&paths);
    }
    free_generator(&paths);
  }
  return 1; // @todo unimplemented
}